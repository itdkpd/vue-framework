#!/usr/bin/env sh

# Get current hour
HOUR=$(date +"%H")

# Time-based greeting
if [ "$HOUR" -lt 6 ]; then
  echo "ğŸŒ™ It's the deep hours of the night... only the bold commit now."
elif [ "$HOUR" -lt 12 ]; then
  echo "â˜€ï¸ Morning commit detected. Fresh brain, clean code."
elif [ "$HOUR" -lt 18 ]; then
  echo "ğŸŒ¤ï¸ Afternoon grind. Letâ€™s make this one count."
else
  echo "ğŸŒ† Evening commit. One last push before glory."
fi

echo ""
echo "ğŸš€âœ¨ Starting test-commit sequence..."
echo "ğŸ” Scanning files for test-commit..."
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"

npm.cmd run test-commit
EXIT_CODE=$?

echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"

if [ $EXIT_CODE -ne 0 ]; then
  echo "âŒ TEST-COMMIT FAILED"
  echo "ğŸ›‘ Your code has been judged unworthy. The commit has been blocked."
  echo "ğŸ’¡ Fix the issues, run the tests again, and return stronger."
  echo ""
  exit 1
fi

echo "âœ… All checks passed!"
echo "ğŸ‰ Your code is clean. The commit may proceed."
echo "ğŸ›¡ï¸ Secured."
echo "ğŸ“¦ Committing now..."
echo ""
